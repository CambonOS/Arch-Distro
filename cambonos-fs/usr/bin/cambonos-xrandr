#!/bin/bash

##Definimos variables
pantallason=$(xrandr -d :0 | grep \ connected | wc -l)
pantallasoff=$(xrandr -d :0 | grep \ disconnected | wc -l)
rpantallas=$(xrandr -d :0 | grep -A 1 \ connected | awk '{print $1}')

#Configuracion pantalla unica
if [ $pantallason -eq 1 ]
then
	L1=$(echo $rpantallas | head -n 1 | tail -n 1) #Nombre pantalla 1
	L2=$(echo $rpantallas | head -n 2 | tail -n 1) #Resolucion pantalla 1
	xrandr --output $L1 --primary --mode $L2 --pos 0x0 --rotate normal
fi

#Configuracion dos pantallas, se configura la pantalla 2 como principal a la derecha de la pantalla 1
if [ $pantallason -eq 2 ]
then
	L1=$(echo $rpantallas | head -n 1 | tail -n 1) #Nombre pantalla 1
	L2=$(echo $rpantallas | head -n 2 | tail -n 1) #Resolucion pantalla 1
	L4=$(echo $rpantallas | head -n 4 | tail -n 1) #Nombre pantalla 2
	L5=$(echo $rpantallas | head -n 5 | tail -n 1) #Resolucion pantalla 2
	pos1=$(echo $L2 | cut -d 'x' -f 1)
	xrandr --output $L1 --mode $L2 --pos 0x0 --rotate normal --output $L4 --primary --mode $L5 --pos ${pos1}x0 --rotate normal
fi

#Configuracion tres pantallas, se configura la pantalla 2 como principal, con la pantalla 1 a la izquierda y la pantalla 3 a la derecha
if [ $pantallason -eq 3 ]
then
	L1=$(echo $rpantallas | head -n 1 | tail -n 1) #Nombre pantalla 1
	L2=$(echo $rpantallas | head -n 2 | tail -n 1) #Resolucion pantalla 1
	L4=$(echo $rpantallas | head -n 4 | tail -n 1) #Nombre pantalla 2
	L5=$(echo $rpantallas | head -n 5 | tail -n 1) #Resolucion pantalla 2
	L7=$(echo $rpantallas | head -n 7 | tail -n 1) #Nombre pantalla 3
	L8=$(echo $rpantallas | head -n 8 | tail -n 1) #Resolucion pantalla 3
	pos1=$(echo $L2 | cut -d 'x' -f 1)
	pos2=$(( $(echo $L2 | cut -d 'x' -f 1) + $(echo $L5 | cut -d 'x' -f 1) ))
	xrandr --output $L1 --mode $L2 --pos 0x0 --rotate normal --output $L4 --primary --mode $L5 --pos ${pos1}x0 --rotate normal --output $L7 --mode $L8 --pos ${pos2}x0 --rotate normal
fi

#Configuramos pantallas desconectadas
nombrepantallas=$(xrandr -d :0 | grep -A 1 \ disconnected | awk '{print $1}')
i=1
while [ $i -le $pantallasoff ]
do
	xrandr --output $(echo $nombrepantallas | head -n $i | tail -n 1) --off
	((i++))
done
